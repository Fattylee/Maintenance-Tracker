<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>MT user request list</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>

 
    <header>
            <div class="container">
            <div class="brand"><a href="request.html">MT</a></div>
        <nav>
           <ul>
                <li><a href="request.html" id="request-list">New Request</a></li>
                <li><a href="index.html" id="sign-out">Sign out</a></li>
            </ul>
        </nav>
        </div>
    </header>

    <div class="container">
        <h1>Maintenance / Repair Details</h1>
        <button id='get'>get request</button>
        <div class="repair-log">
            <ul>
                <li><span>Request/Repair:</span> repair</li>
                <li><span>Description:</span> A broken computer screen</li>
                <li><span>Date:</span> 19/09/2017</li>
                <li><span>Status:</span> <span class="success">done</span></li>
            </ul>
        </div>
        <div class="repair-log">
                <ul>
                    <li><span>Request/Repair:</span> maintenance</li>
                    <li><span>Description:</span> very slow pc</li>
                    <li><span>Date:</span> 21/06/2018</li>
                    <li><span>Status:</span> <span class="pending">pending</span></li>
                </ul>
            </div>
            <div class="repair-log">
                    <ul>
                        <li><span>Request/Repair:</span> repair</li>
                        <li><span>Description:</span> A broken internet-cable</li>
                        <li><span>Date:</span> 7/09/2017</li>
                        <li><span>Status:</span> <span class="critical">critical</span></li>
                    </ul>
                </div>
      
</body>

<script>
    const getRequest = (eventObj) => {
        eventObj.preventDefault();
            
            console.log("from onsubmit");
           
           let  token = localStorage.getItem('token');

            fetch('/api/v1/users/requests', {
                method: 'GET',
                headers: {
                    'Accept': 'application/json, text/plain, */*',
                    'Content-type': 'application/json',
                    'Authorization': token
                }
            })
            .then((res) => res.json())
            .then((data) => console.log( data))
            .catch(err => {
                console.log('from catch', err);
            });
        }

        document.getElementById('get').addEventListener('click', getRequest);
</script>
</html>